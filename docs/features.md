# 機能仕様書

## 概要

`jsont` は、JSON データを美しく表示する Terminal User Interface (TUI) アプリケーションです。コマンドラインでの JSON 操作を効率的に行うためのツールを提供します。

## コア機能

### 1. JSON 表示機能

#### 基本表示
- **カラフルな構文ハイライト**
  - 文字列: 緑色
  - 数値: シアン色  
  - ブール値: 黄色
  - null: グレー色
  - オブジェクトキー: 青色

- **階層表示**
  - ネストしたオブジェクトと配列の適切なインデント
  - 折りたたみ可能な構造（将来実装予定）

#### 入力方式
- **標準入力 (stdin) からの読み込み**
  ```bash
  cat data.json | jsont
  echo '{"key": "value"}' | jsont
  curl -s https://api.example.com/data | jsont
  ```

- **ファイル入力**（将来実装予定）
  ```bash
  jsont data.json
  jsont *.json
  ```

### 2. 検索・フィルタリング機能

#### jq 統合
- **リアルタイム jq フィルタリング**
  - インタラクティブな jq クエリ入力
  - フィルタ結果の即座反映
  - jq 構文エラーの表示

#### 検索機能
- **キー検索**
  - オブジェクトキーの部分一致検索
  - 大小文字を区別しない検索

- **値検索**
  - 文字列値の検索
  - 正規表現サポート

### 3. ナビゲーション機能

#### キーボードショートカット
- **基本操作**
  - `↑/↓`: 上下移動
  - `←/→`: 左右移動（階層の展開/折りたたみ）
  - `Page Up/Down`: ページスクロール
  - `Home/End`: 先頭/末尾への移動

- **特殊操作**
  - `Ctrl+C`: 終了
  - `/`: 検索モード開始
  - `Esc`: モード終了
  - `Tab`: フィルタ入力モード切り替え

#### 階層ナビゲーション
- **パンくずリスト**
  - 現在位置の表示
  - クリック可能なパス要素

- **ズーム機能**
  - 特定のオブジェクトにフォーカス
  - 親レベルへの復帰

### 4. データ操作機能

#### コピー機能
- **選択した値のコピー**
  - クリップボードへの値コピー
  - JSON パスのコピー
  - 整形されたJSON全体のコピー

#### エクスポート機能
- **各種フォーマットでの出力**
  - 整形されたJSON
  - 圧縮されたJSON
  - CSV形式（配列データの場合）
  - YAML形式

### 5. 表示オプション

#### カスタマイズ可能な表示設定
- **インデント幅の調整**
- **カラーテーマの選択**
  - ダークテーマ（デフォルト）
  - ライトテーマ
  - カスタムテーマ

- **表示モード**
  - コンパクトモード
  - 詳細モード
  - ツリービューモード

#### 大容量データ対応
- **遅延読み込み**
  - 大きなJSONの段階的表示
  - メモリ効率的な処理

- **仮想スクロール**
  - 大量の配列要素の効率的な表示

## 技術要件

### パフォーマンス
- **応答性**: フィルタリング操作が100ms以内で完了
- **メモリ効率**: 100MB以下のJSON を安定して処理
- **起動時間**: 1秒以内での初期表示

### 互換性
- **JSON仕様**: RFC 7159 完全準拠
- **プラットフォーム**: macOS, Linux, Windows（WSL含む）
- **ターミナル**: 256色対応の現代的なターミナル

### セキュリティ
- **入力検証**: 不正なJSONの安全な処理
- **メモリ安全性**: TypeScriptによる型安全性
- **プライバシー**: ローカル処理のみ、外部通信なし

## 品質基準

### ユーザビリティ
- **直感的な操作**: 学習コストの最小化
- **高速な操作**: キーボード中心のワークフロー
- **エラー処理**: 分かりやすいエラーメッセージ

### 保守性
- **モジュラー設計**: 機能ごとの独立したコンポーネント
- **テストカバレッジ**: 80%以上のコードカバレッジ
- **ドキュメント**: 包括的な開発者ドキュメント